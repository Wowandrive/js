<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml">
<head><meta name="generator" content="olat-tinymce-4" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title></title></head><body><p>Since the file server serves up any kind of file and even includes the right <code>Content-Type</code> header, you can use it to serve a website. Since it allows everybody to delete and replace files, it would be an interesting kind of website: one that can be modified, vandalized, and destroyed by everybody who takes the time to create the right HTTP request. Still, it would be a website.</p>
<p><a class="p_ident" id="p_S5RQ8T3sNn" href="http://eloquentjavascript.net/20_node.html#p_S5RQ8T3sNn"></a>Write a basic HTML page that includes a simple JavaScript file. Put the files in a directory served by the file server and open them in your browser.</p>
<p><a class="p_ident" id="p_UerJ/YohV1" href="http://eloquentjavascript.net/20_node.html#p_UerJ/YohV1"></a>Next, as an advanced exercise or even a weekend project, combine all the knowledge you gained from this book to build a more user-friendly interface for modifying the website from <em>inside</em> the website.</p>
<p><a class="p_ident" id="p_/XOhzawYGD" href="http://eloquentjavascript.net/20_node.html#p_/XOhzawYGD"></a>Use an HTML form (<a href="javascript:parent.gotonode(93090004775963)">Chapter 18</a>) to edit the content of the files that make up the website, allowing the user to update them on the server by using HTTP requests as described in <a href="javascript:parent.gotonode(93090004774635)">Chapter 17</a>.</p>
<p><a class="p_ident" id="p_hWSA1+odAv" href="http://eloquentjavascript.net/20_node.html#p_hWSA1+odAv"></a>Start by making only a single file editable. Then make it so that the user can select which file to edit. Use the fact that our file server returns lists of files when reading a directory.</p>
<p><a class="p_ident" id="p_Ph56FG1hyk" href="http://eloquentjavascript.net/20_node.html#p_Ph56FG1hyk"></a>Don&rsquo;t work directly in the code on the file server, since if you make a mistake you are likely to damage the files there. Instead, keep your work outside of the publicly accessible directory and copy it there when testing.</p>
<p><a class="p_ident" id="p_3aqVNaF+TI" href="http://eloquentjavascript.net/20_node.html#p_3aqVNaF+TI"></a>If your computer is directly connected to the Internet, without a firewall, router, or other interfering device in between, you might be able to invite a friend to use your website. To check, go to <a href="http://www.whatismyip.com/"><em>whatismyip.com</em></a>, copy the IP address it gives you into the address bar of your browser, and add <code>:8000</code> after it to select the right port. If that brings you to your site, it is online for everybody to see.</p>
<div class="solution open">
<div class="solution-text b_info">
<p><a class="p_ident" id="p_v9JKMD5WJI" href="http://eloquentjavascript.net/20_node.html#p_v9JKMD5WJI"></a>You can create a <code>&lt;textarea&gt;</code> element to hold the content of the file that is being edited. A <code>GET</code> request, using <code>XMLHttpRequest</code>, can be used to get the current content of the file. You can use relative URLs like <em>index.html</em>, instead of <a href="http://localhost:8000/index.html"><em>http://localhost:8000/index.html</em></a>, to refer to files on the same server as the running script.</p>
<p><a class="p_ident" id="p_AddxfNwTA3" href="http://eloquentjavascript.net/20_node.html#p_AddxfNwTA3"></a>Then, when the user clicks a button (you can use a <code>&lt;form&gt;</code> element and <code>"submit"</code> event or simply a <code>"click"</code> handler), make a <code>PUT</code> request to the same URL, with the content of the <code>&lt;textarea&gt;</code> as request body, to save the file.</p>
<p><a class="p_ident" id="p_LI3MHsPkwQ" href="http://eloquentjavascript.net/20_node.html#p_LI3MHsPkwQ"></a>You can then add a <code>&lt;select&gt;</code> element that contains all the files in the server&rsquo;s root directory by adding <code>&lt;option&gt;</code> elements containing the lines returned by a <code>GET</code> request to the URL <code>/</code>. When the user selects another file (a <code>"change"</code> event on the field), the script must fetch and display that file. Also make sure that when saving a file, you use the currently selected filename.</p>
<p><a class="p_ident" id="p_z/PE8qzDXg" href="http://eloquentjavascript.net/20_node.html#p_z/PE8qzDXg"></a>Unfortunately, the server is too simplistic to be able to reliably read files from subdirectories since it does not tell us whether the thing we fetched with a <code>GET</code> request is a regular file or a directory. Can you think of a way to extend the server to address this?</p>
</div>
</div>
<p></p>
<p>You have to deliver the solution files to Git repository. You can use pre-defined unit tests located in test folder in your repository (you will need to change extension to.js in order to enable them)<br /><br />Ask your tutor if you have any questions.</p></body></html>